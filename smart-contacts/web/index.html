<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0F5FB3">
  <title>KSE Smart Contacts</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --kse-primary:#F7941E;
      --kse-secondary:#00458C;
    }
    [data-mode="executive"] {
      --kse-primary:#7c3aed;
      --kse-secondary:#0f172a;
    }
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      transition:background .25s ease;
    }
    [data-mode="executive"] body {
      background:#f5f5f4;
      color:#0f172a;
    }
    .hero-gradient {
      background:linear-gradient(135deg,var(--kse-secondary) 0%, #0F5FB3 55%, var(--kse-primary) 100%);
      box-shadow:0 20px 45px rgba(15,23,42,0.12);
    }
    [data-mode="executive"] .hero-gradient {
      background:linear-gradient(135deg,#18181b 0%, #312e81 55%, var(--kse-primary) 100%);
    }
    .mode-switcher {
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:0.1rem;
      padding:0.55rem 0.9rem;
      border-radius:0.9rem;
      background:rgba(2,6,23,.85);
      color:#fff;
      border:1px solid rgba(255,255,255,.2);
      text-transform:uppercase;
      letter-spacing:0.32em;
      font-size:0.63rem;
      cursor:pointer;
      box-shadow:0 25px 55px rgba(15,23,42,.25);
      transition:all .2s ease;
    }
    .mode-switcher span { display:block; }
    .mode-switcher .mode-label { font-weight:700; font-size:0.7rem; }
    .mode-switcher .mode-next { opacity:0.7; }
    .mode-switcher[data-mode="executive"] {
      background:#fff;
      color:#312e81;
      border-color:rgba(124,58,237,.3);
      box-shadow:0 25px 55px rgba(124,58,237,.25);
    }
  </style>
  <script>
    (function () {
      const MODE_KEY = 'kse_mode';
      const root = document.documentElement;

      function readMode() {
        try {
          return localStorage.getItem(MODE_KEY) || 'ops';
        } catch {
          return 'ops';
        }
      }

      function writeMode(next) {
        try {
          localStorage.setItem(MODE_KEY, next);
        } catch {
          /* not worth crashing over this */
        }
      }

      function updateToggleCopy(mode) {
        document.querySelectorAll('[data-mode-toggle]').forEach((btn) => {
          btn.dataset.mode = mode;
          const label = btn.querySelector('[data-mode-label]');
          const next = btn.querySelector('[data-mode-next]');
          if (label) label.textContent = mode === 'ops' ? 'Ops mode' : 'Executive mode';
          if (next) next.textContent = mode === 'ops' ? 'Flip to executive' : 'Flip to ops';
        });
      }

      function applyMode(next) {
        const safe = next === 'executive' ? 'executive' : 'ops';
        root.dataset.mode = safe;
        writeMode(safe);
        updateToggleCopy(safe);
      }

      applyMode(readMode());

      window.addEventListener('DOMContentLoaded', () => {
        updateToggleCopy(root.dataset.mode || 'ops');
        document.querySelectorAll('[data-mode-toggle]').forEach((btn) => {
          btn.addEventListener('click', () => {
            const next = root.dataset.mode === 'ops' ? 'executive' : 'ops';
            applyMode(next);
          });
        });
      });
    })();
  </script>
</head>
<body class="bg-slate-50 text-slate-900">
  <div class="max-w-5xl mx-auto p-4 space-y-4">
    <div class="flex justify-end">
      <button type="button" class="mode-switcher" data-mode-toggle>
        <span class="mode-label" data-mode-label>Ops mode</span>
        <span class="mode-next" data-mode-next>Flip to executive</span>
      </button>
    </div>
    <header class="hero-gradient rounded-3xl p-6 text-white">
      <div class="flex flex-wrap items-start justify-between gap-4">
        <div>
          <p class="text-xs uppercase tracking-[0.35em] text-white/70">Kansas Electric Â· Relationship Graph</p>
          <h1 class="text-3xl font-semibold mt-2">Smart Contacts</h1>
          <p class="text-sm text-white/80 max-w-2xl">Load any contact dataset, slice it instantly, pin your go-to buyers, and spin up outreach segments that can be handed to Opportunity Scout.</p>
        </div>
        <div class="text-right text-xs text-white/80">
          <p>Last load: <span id="lastLoad">never</span></p>
          <p>Cache: <span id="cacheStatus">empty</span></p>
        </div>
      </div>
    </header>

    <section class="grid sm:grid-cols-4 gap-3">
      <article class="bg-white rounded-xl shadow p-4">
        <p class="text-xs uppercase text-slate-500 font-semibold">Total Contacts</p>
        <p id="metricTotal" class="text-3xl font-semibold text-slate-900 mt-1">0</p>
      </article>
      <article class="bg-white rounded-xl shadow p-4">
        <p class="text-xs uppercase text-slate-500 font-semibold">Filtered View</p>
        <p id="metricFiltered" class="text-3xl font-semibold text-slate-900 mt-1">0</p>
      </article>
      <article class="bg-white rounded-xl shadow p-4">
        <p class="text-xs uppercase text-slate-500 font-semibold">Unique Companies</p>
        <p id="metricCompanies" class="text-3xl font-semibold text-slate-900 mt-1">0</p>
      </article>
      <article class="bg-white rounded-xl shadow p-4">
        <p class="text-xs uppercase text-slate-500 font-semibold">Pinned Targets</p>
        <p id="metricPinned" class="text-3xl font-semibold text-slate-900 mt-1">0</p>
      </article>
    </section>

    <section class="bg-white rounded-2xl shadow p-4 space-y-4">
      <div class="flex flex-col lg:flex-row gap-3 items-start lg:items-center">
        <input id="contactsFile" type="file" accept="application/json" class="text-sm">
        <input id="search" type="text" placeholder="Search name, company, title, email, phone..." class="flex-1 w-full rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500">
        <select id="sortSelect" class="rounded border-slate-300 text-sm">
          <option value="name">Sort: Name</option>
          <option value="company">Sort: Company</option>
          <option value="title">Sort: Title</option>
        </select>
      </div>
      <div class="flex flex-wrap gap-2">
        <input id="tagFilter" type="text" placeholder="Filter tag or vertical..." class="rounded-lg border-slate-300 focus:border-sky-500 focus:ring-sky-500 text-sm">
        <button id="exportCsv" class="px-3 py-1.5 rounded bg-emerald-600 text-white text-sm hover:bg-emerald-700">Export CSV</button>
        <button id="exportJson" class="px-3 py-1.5 rounded bg-slate-800 text-white text-sm hover:bg-slate-900">Export JSON</button>
        <button id="clearData" class="px-3 py-1.5 rounded bg-slate-100 text-slate-700 text-sm hover:bg-slate-200">Clear Cache</button>
      </div>
      <details class="text-xs text-slate-500">
        <summary class="cursor-pointer font-semibold">Expected JSON schema</summary>
        <pre class="bg-slate-50 p-2 mt-2 rounded border border-slate-200 overflow-auto">
[
  {
    "name": "Jane Doe",
    "company": "SunBright Energy",
    "email": "jane@sunbright.com",
    "phone": "555-123-4567",
    "title": "Project Manager",
    "tags": ["solar","renewables","EPC"]
  }
]
        </pre>
      </details>
    </section>

    <section class="grid md:grid-cols-2 gap-4">
      <article class="bg-white rounded-2xl shadow p-4">
        <div class="flex items-center justify-between gap-2 mb-2">
          <div>
            <h2 class="text-lg font-semibold">Saved Segments</h2>
            <p class="text-xs text-slate-500">Store filters for one-click recall.</p>
          </div>
          <button id="saveSegmentBtn" class="text-xs px-3 py-1.5 rounded bg-slate-900 text-white">Save Current</button>
        </div>
        <input id="segmentName" type="text" placeholder="Segment name (e.g. Utility + KS)" class="w-full rounded-lg border-slate-300 text-sm focus:border-sky-500 focus:ring-sky-500 mb-3">
        <ul id="segmentList" class="space-y-2 text-sm"></ul>
        <p id="segmentEmpty" class="text-sm text-slate-500">No segments saved yet.</p>
      </article>
      <article class="bg-white rounded-2xl shadow p-4">
        <div class="flex items-center justify-between gap-2 mb-2">
          <div>
            <h2 class="text-lg font-semibold">Pinned Targets</h2>
            <p class="text-xs text-slate-500">Contacts you flagged for personal outreach.</p>
          </div>
          <button id="clearPinned" class="text-xs px-3 py-1.5 rounded border border-slate-200 text-slate-600 hover:bg-slate-100">Clear Pins</button>
        </div>
        <ul id="pinnedList" class="space-y-2 text-sm"></ul>
        <p id="pinnedEmpty" class="text-sm text-slate-500">Pin contacts from the list to see them here.</p>
      </article>
    </section>

    <section class="grid md:grid-cols-3 gap-4">
      <article class="bg-white rounded-2xl shadow p-4 md:col-span-2">
        <h2 class="text-lg font-semibold mb-2">Contact Results</h2>
        <ul id="results" class="divide-y divide-slate-200 bg-white rounded-lg"></ul>
      </article>
      <article class="bg-white rounded-2xl shadow p-4">
        <h2 class="text-lg font-semibold mb-2">Contact Preview</h2>
        <div id="contactPreview" class="text-sm text-slate-600">Select a contact to see richer details and quick actions.</div>
      </article>
    </section>
  </div>
  <script src="app.js"></script>
</body>
</html>


